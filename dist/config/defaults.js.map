{"version":3,"sources":["../../src/config/defaults.ts"],"sourcesContent":["import type { JobsConfig } from '../queues/config/types/index.js'\nimport type { Config } from './types.js'\n\nimport defaultAccess from '../auth/defaultAccess.js'\n\n/**\n * @deprecated - remove in 4.0. This is error-prone, as mutating this object will affect any objects that use the defaults as a base.\n */\nexport const defaults: Omit<Config, 'db' | 'editor' | 'secret'> = {\n  admin: {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n    },\n    routes: {\n      account: '/account',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n    },\n    theme: 'all',\n  },\n  auth: {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n  },\n  bin: [],\n  collections: [],\n  cookiePrefix: 'payload',\n  cors: [],\n  csrf: [],\n  custom: {},\n  defaultDepth: 2,\n  defaultMaxTextLength: 40000,\n  endpoints: [],\n  globals: [],\n  graphQL: {\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n  },\n  hooks: {},\n  i18n: {},\n  jobs: {\n    access: {\n      run: defaultAccess,\n    },\n    deleteJobOnComplete: true,\n    depth: 0,\n  } as JobsConfig,\n  localization: false,\n  maxDepth: 10,\n  routes: {\n    admin: '/admin',\n    api: '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n  },\n  serverURL: '',\n  telemetry: true,\n  typescript: {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n  },\n  upload: {},\n}\n\nexport const addDefaultsToConfig = (config: Config): Config => {\n  config.admin = {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    theme: 'all',\n    ...(config.admin || {}),\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n      ...(config?.admin?.importMap || {}),\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n      ...(config?.admin?.meta || {}),\n    },\n    routes: {\n      account: '/account',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n      ...(config?.admin?.routes || {}),\n    },\n  }\n\n  config.bin = config.bin ?? []\n  config.collections = config.collections ?? []\n  config.cookiePrefix = config.cookiePrefix ?? 'payload'\n  config.cors = config.cors ?? []\n  config.csrf = config.csrf ?? []\n  config.custom = config.custom ?? {}\n  config.defaultDepth = config.defaultDepth ?? 2\n  config.defaultMaxTextLength = config.defaultMaxTextLength ?? 40000\n  config.endpoints = config.endpoints ?? []\n  config.globals = config.globals ?? []\n  config.graphQL = {\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n    ...(config.graphQL || {}),\n  }\n  config.hooks = config.hooks ?? {}\n  config.i18n = config.i18n ?? {}\n  config.jobs = {\n    deleteJobOnComplete: true,\n    depth: 0,\n    ...(config.jobs || {}),\n    access: {\n      run: defaultAccess,\n      ...(config.jobs?.access || {}),\n    },\n  } as JobsConfig\n  config.localization = config.localization ?? false\n  config.maxDepth = config.maxDepth ?? 10\n  config.routes = {\n    admin: '/admin',\n    api: (process.env.NEXT_BASE_PATH ?? '') + '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n    ...(config.routes || {}),\n  }\n  config.serverURL = config.serverURL ?? ''\n  config.telemetry = config.telemetry ?? true\n  config.typescript = {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n    ...(config.typescript || {}),\n  }\n  config.upload = config.upload ?? {}\n\n  config.auth = {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n    ...(config.auth || {}),\n  }\n\n  return config\n}\n"],"names":["defaultAccess","defaults","admin","avatar","components","custom","dateFormat","dependencies","importMap","baseDir","process","cwd","meta","defaultOGImageType","robots","titleSuffix","routes","account","createFirstUser","forgot","inactivity","login","logout","reset","unauthorized","theme","auth","jwtOrder","bin","collections","cookiePrefix","cors","csrf","defaultDepth","defaultMaxTextLength","endpoints","globals","graphQL","disablePlaygroundInProduction","maxComplexity","schemaOutputFile","hooks","i18n","jobs","access","run","deleteJobOnComplete","depth","localization","maxDepth","api","graphQLPlayground","serverURL","telemetry","typescript","autoGenerate","outputFile","upload","addDefaultsToConfig","config","env","NEXT_BASE_PATH"],"mappings":"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"}