{"version":3,"sources":["../../src/utilities/getFieldByPath.ts"],"sourcesContent":["import type { FlattenedField } from '../fields/config/types.js'\n\n/**\n * Get the field from by its path.\n * Can accept nested paths, e.g: group.title, array.group.title\n * If there were any localized on the path, pathHasLocalized will be true and localizedPath will look like:\n * group.<locale>.title // group is localized here\n */\nexport const getFieldByPath = ({\n  fields,\n  localizedPath = '',\n  path,\n}: {\n  fields: FlattenedField[]\n  localizedPath?: string\n  path: string\n}): {\n  field: FlattenedField\n  localizedPath: string\n  pathHasLocalized: boolean\n} | null => {\n  let currentFields: FlattenedField[] = fields\n\n  let currentField: FlattenedField | null = null\n\n  const segments = path.split('.')\n\n  let pathHasLocalized = false\n\n  while (segments.length > 0) {\n    const segment = segments.shift()\n    localizedPath = `${localizedPath ? `${localizedPath}.` : ''}${segment}`\n    const field = currentFields.find((each) => each.name === segment)\n\n    if (!field) {\n      return null\n    }\n\n    if (field.localized) {\n      pathHasLocalized = true\n      localizedPath = `${localizedPath}.<locale>`\n    }\n\n    if ('flattenedFields' in field) {\n      currentFields = field.flattenedFields\n    }\n\n    if ('blocks' in field) {\n      for (const block of field.blocks) {\n        const maybeField = getFieldByPath({\n          fields: block.flattenedFields,\n          localizedPath,\n          path: [...segments].join('.'),\n        })\n\n        if (maybeField) {\n          return maybeField\n        }\n      }\n    }\n\n    currentField = field\n  }\n\n  if (!currentField) {\n    return null\n  }\n\n  return { field: currentField, localizedPath, pathHasLocalized }\n}\n"],"names":["getFieldByPath","fields","localizedPath","path","currentFields","currentField","segments","split","pathHasLocalized","length","segment","shift","field","find","each","name","localized","flattenedFields","block","blocks","maybeField","join"],"mappings":"AAEA;;;;;CAKC,GACD,OAAO,MAAMA,iBAAiB,CAAC,EAC7BC,MAAM,EACNC,gBAAgB,EAAE,EAClBC,IAAI,EAKL;IAKC,IAAIC,gBAAkCH;IAEtC,IAAII,eAAsC;IAE1C,MAAMC,WAAWH,KAAKI,KAAK,CAAC;IAE5B,IAAIC,mBAAmB;IAEvB,MAAOF,SAASG,MAAM,GAAG,EAAG;QAC1B,MAAMC,UAAUJ,SAASK,KAAK;QAC9BT,gBAAgB,GAAGA,gBAAgB,GAAGA,cAAc,CAAC,CAAC,GAAG,KAAKQ,SAAS;QACvE,MAAME,QAAQR,cAAcS,IAAI,CAAC,CAACC,OAASA,KAAKC,IAAI,KAAKL;QAEzD,IAAI,CAACE,OAAO;YACV,OAAO;QACT;QAEA,IAAIA,MAAMI,SAAS,EAAE;YACnBR,mBAAmB;YACnBN,gBAAgB,GAAGA,cAAc,SAAS,CAAC;QAC7C;QAEA,IAAI,qBAAqBU,OAAO;YAC9BR,gBAAgBQ,MAAMK,eAAe;QACvC;QAEA,IAAI,YAAYL,OAAO;YACrB,KAAK,MAAMM,SAASN,MAAMO,MAAM,CAAE;gBAChC,MAAMC,aAAapB,eAAe;oBAChCC,QAAQiB,MAAMD,eAAe;oBAC7Bf;oBACAC,MAAM;2BAAIG;qBAAS,CAACe,IAAI,CAAC;gBAC3B;gBAEA,IAAID,YAAY;oBACd,OAAOA;gBACT;YACF;QACF;QAEAf,eAAeO;IACjB;IAEA,IAAI,CAACP,cAAc;QACjB,OAAO;IACT;IAEA,OAAO;QAAEO,OAAOP;QAAcH;QAAeM;IAAiB;AAChE,EAAC"}