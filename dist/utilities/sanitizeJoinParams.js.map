{"version":3,"sources":["../../src/utilities/sanitizeJoinParams.ts"],"sourcesContent":["// @ts-strict-ignore\nimport type { JoinQuery } from '../types/index.js'\n\nimport { isNumber } from './isNumber.js'\n\n/**\n * Convert request JoinQuery object from strings to numbers\n * @param joins\n */\nexport const sanitizeJoinParams = (\n  joins:\n    | {\n        [schemaPath: string]:\n          | {\n              limit?: unknown\n              sort?: string\n              where?: unknown\n            }\n          | false\n      }\n    | false = {},\n): JoinQuery => {\n  const joinQuery = {}\n\n  Object.keys(joins).forEach((schemaPath) => {\n    if (joins[schemaPath] === 'false' || joins[schemaPath] === false) {\n      joinQuery[schemaPath] = false\n    } else {\n      joinQuery[schemaPath] = {\n        count: joins[schemaPath].count === 'true',\n        limit: isNumber(joins[schemaPath]?.limit) ? Number(joins[schemaPath].limit) : undefined,\n        page: isNumber(joins[schemaPath]?.page) ? Number(joins[schemaPath].page) : undefined,\n        sort: joins[schemaPath]?.sort ? joins[schemaPath].sort : undefined,\n        where: joins[schemaPath]?.where ? joins[schemaPath].where : undefined,\n      }\n    }\n  })\n\n  return joinQuery\n}\n"],"names":["isNumber","sanitizeJoinParams","joins","joinQuery","Object","keys","forEach","schemaPath","count","limit","Number","undefined","page","sort","where"],"mappings":"AAAA,oBAAoB;AAGpB,SAASA,QAAQ,QAAQ,gBAAe;AAExC;;;CAGC,GACD,OAAO,MAAMC,qBAAqB,CAChCC,QAUY,CAAC,CAAC;IAEd,MAAMC,YAAY,CAAC;IAEnBC,OAAOC,IAAI,CAACH,OAAOI,OAAO,CAAC,CAACC;QAC1B,IAAIL,KAAK,CAACK,WAAW,KAAK,WAAWL,KAAK,CAACK,WAAW,KAAK,OAAO;YAChEJ,SAAS,CAACI,WAAW,GAAG;QAC1B,OAAO;YACLJ,SAAS,CAACI,WAAW,GAAG;gBACtBC,OAAON,KAAK,CAACK,WAAW,CAACC,KAAK,KAAK;gBACnCC,OAAOT,SAASE,KAAK,CAACK,WAAW,EAAEE,SAASC,OAAOR,KAAK,CAACK,WAAW,CAACE,KAAK,IAAIE;gBAC9EC,MAAMZ,SAASE,KAAK,CAACK,WAAW,EAAEK,QAAQF,OAAOR,KAAK,CAACK,WAAW,CAACK,IAAI,IAAID;gBAC3EE,MAAMX,KAAK,CAACK,WAAW,EAAEM,OAAOX,KAAK,CAACK,WAAW,CAACM,IAAI,GAAGF;gBACzDG,OAAOZ,KAAK,CAACK,WAAW,EAAEO,QAAQZ,KAAK,CAACK,WAAW,CAACO,KAAK,GAAGH;YAC9D;QACF;IACF;IAEA,OAAOR;AACT,EAAC"}