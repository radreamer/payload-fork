{"version":3,"sources":["../../src/email/sendEmail.ts"],"sourcesContent":["import type { Payload } from '../types/index.js'\nimport type { SendEmailOptions } from './types.js'\n\nimport { getStringifiedToAddress } from './getStringifiedToAddress.js'\n\nexport async function sendEmail(this: Payload, message: SendEmailOptions): Promise<unknown> {\n  let result\n\n  try {\n    result = await this.email.sendEmail(message)\n  } catch (err: unknown) {\n    const stringifiedTo = getStringifiedToAddress(message)\n\n    this.logger.error({\n      err,\n      msg: `Failed to send mail to ${stringifiedTo}, subject: ${message.subject ?? 'No Subject'}`,\n    })\n    return err\n  }\n\n  return result\n}\n"],"names":["getStringifiedToAddress","sendEmail","message","result","email","err","stringifiedTo","logger","error","msg","subject"],"mappings":"AAGA,SAASA,uBAAuB,QAAQ,+BAA8B;AAEtE,OAAO,eAAeC,UAAyBC,OAAyB;IACtE,IAAIC;IAEJ,IAAI;QACFA,SAAS,MAAM,IAAI,CAACC,KAAK,CAACH,SAAS,CAACC;IACtC,EAAE,OAAOG,KAAc;QACrB,MAAMC,gBAAgBN,wBAAwBE;QAE9C,IAAI,CAACK,MAAM,CAACC,KAAK,CAAC;YAChBH;YACAI,KAAK,CAAC,uBAAuB,EAAEH,cAAc,WAAW,EAAEJ,QAAQQ,OAAO,IAAI,cAAc;QAC7F;QACA,OAAOL;IACT;IAEA,OAAOF;AACT"}