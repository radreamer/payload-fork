{"version":3,"sources":["../../../../src/bin/generateImportMap/utilities/resolveImportMapFilePath.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\n\n/**\n * Returns the path to the import map file. If the import map file is not found, it throws an error.\n */\nexport function resolveImportMapFilePath({\n  adminRoute = '/admin',\n  importMapFile,\n  rootDir,\n}: {\n  adminRoute?: string\n  importMapFile?: string\n  rootDir: string\n}) {\n  let importMapFilePath: string | undefined = undefined\n\n  if (importMapFile?.length) {\n    if (!fs.existsSync(importMapFile)) {\n      throw new Error(`Could not find the import map file at ${importMapFile}`)\n    }\n    importMapFilePath = importMapFile\n  } else {\n    const appLocation = path.resolve(rootDir, `app/(payload)${adminRoute}/`)\n    const srcAppLocation = path.resolve(rootDir, `src/app/(payload)${adminRoute}/`)\n\n    if (fs.existsSync(appLocation)) {\n      importMapFilePath = path.resolve(appLocation, 'importMap.js')\n    } else if (fs.existsSync(srcAppLocation)) {\n      importMapFilePath = path.resolve(srcAppLocation, 'importMap.js')\n    } else {\n      throw new Error(\n        `Could not find Payload import map folder. Looked in ${appLocation} and ${srcAppLocation}`,\n      )\n    }\n  }\n  return importMapFilePath\n}\n"],"names":["fs","path","resolveImportMapFilePath","adminRoute","importMapFile","rootDir","importMapFilePath","undefined","length","existsSync","Error","appLocation","resolve","srcAppLocation"],"mappings":"AAAA,OAAOA,QAAQ,KAAI;AACnB,OAAOC,UAAU,OAAM;AAEvB;;CAEC,GACD,OAAO,SAASC,yBAAyB,EACvCC,aAAa,QAAQ,EACrBC,aAAa,EACbC,OAAO,EAKR;IACC,IAAIC,oBAAwCC;IAE5C,IAAIH,eAAeI,QAAQ;QACzB,IAAI,CAACR,GAAGS,UAAU,CAACL,gBAAgB;YACjC,MAAM,IAAIM,MAAM,CAAC,sCAAsC,EAAEN,eAAe;QAC1E;QACAE,oBAAoBF;IACtB,OAAO;QACL,MAAMO,cAAcV,KAAKW,OAAO,CAACP,SAAS,CAAC,aAAa,EAAEF,WAAW,CAAC,CAAC;QACvE,MAAMU,iBAAiBZ,KAAKW,OAAO,CAACP,SAAS,CAAC,iBAAiB,EAAEF,WAAW,CAAC,CAAC;QAE9E,IAAIH,GAAGS,UAAU,CAACE,cAAc;YAC9BL,oBAAoBL,KAAKW,OAAO,CAACD,aAAa;QAChD,OAAO,IAAIX,GAAGS,UAAU,CAACI,iBAAiB;YACxCP,oBAAoBL,KAAKW,OAAO,CAACC,gBAAgB;QACnD,OAAO;YACL,MAAM,IAAIH,MACR,CAAC,oDAAoD,EAAEC,YAAY,KAAK,EAAEE,gBAAgB;QAE9F;IACF;IACA,OAAOP;AACT"}